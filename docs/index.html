<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>simple_toon - TOON Encoder/Decoder for Eiffel</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <div class="logo-container">
            <img src="images/logo.svg" alt="simple_* logo" class="logo">
        </div>
        <h1>simple_toon</h1>
        <p class="tagline">TOON (Token-Oriented Object Notation) Encoder/Decoder for Eiffel</p>
        <div class="badges">
            <span class="badge badge-version">v1.0.0</span>
            <span class="badge badge-license">MIT</span>
            <span class="badge badge-rfc">30-60% Token Reduction</span>
        </div>
    </header>

    <nav>
        <ul>
            <li><a href="#overview">Overview</a></li>
            <li><a href="#format-comparison">Format</a></li>
            <li><a href="#quick-start">Quick Start</a></li>
            <li><a href="#decimal-precision">Decimal Precision</a></li>
            <li><a href="#api">API</a></li>
            <li><a href="https://github.com/simple-eiffel/simple_toon">GitHub</a></li>
        </ul>
    </nav>

    <main>
        <section id="overview">
            <h2>Overview</h2>
            <p>
                TOON is a compact, human-readable format designed to minimize token usage when sending
                structured data to Large Language Models. <strong>simple_toon</strong> provides seamless
                conversion between JSON and TOON formats, achieving <strong>30-60% token reduction</strong>
                while maintaining lossless round-trip conversion.
            </p>
            <p>
                Part of the <a href="https://github.com/simple-eiffel">Simple Eiffel</a> ecosystem.
            </p>
        </section>

        <section id="format-comparison">
            <h2>Format Comparison</h2>

            <h3>Simple Objects</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>JSON (37 tokens)</h4>
<pre><code>{
  "name": "Alice",
  "age": 30,
  "active": true
}</code></pre>
                </div>
                <div class="feature-card">
                    <h4>TOON (15 tokens)</h4>
<pre><code>name: Alice
age: 30
active: true</code></pre>
                </div>
            </div>

            <h3>Tabular Arrays</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>JSON Array (85 tokens)</h4>
<pre><code>[
  {"sku": "A1", "name": "Widget", "price": 9.99},
  {"sku": "B2", "name": "Gadget", "price": 14.50}
]</code></pre>
                </div>
                <div class="feature-card">
                    <h4>TOON Tabular (28 tokens)</h4>
<pre><code>[2]{sku,name,price}:
  A1,Widget,9.99
  B2,Gadget,14.5</code></pre>
                </div>
            </div>
        </section>

        <section id="quick-start">
            <h2>Quick Start</h2>

            <h3>Installation</h3>
            <ol>
                <li>Set the environment variable:
<pre><code>export SIMPLE_EIFFEL=/d/prod</code></pre>
                </li>
                <li>Add to your ECF file:
<pre><code>&lt;library name="simple_toon" location="$SIMPLE_EIFFEL/simple_toon/simple_toon.ecf"/&gt;</code></pre>
                </li>
            </ol>

            <h3>Encode &amp; Decode</h3>
<pre><code><span class="keyword">local</span>
    toon: <span class="type">SIMPLE_TOON</span>
    json: <span class="type">SIMPLE_JSON</span>
    value: <span class="type">SIMPLE_JSON_VALUE</span>
    toon_text, json_text: <span class="type">STRING_32</span>
<span class="keyword">do</span>
    <span class="keyword">create</span> toon.make
    <span class="keyword">create</span> json

    <span class="comment">-- Encode JSON to TOON</span>
    value := json.parse (<span class="string">"{%"name%": %"Alice%", %"age%": 30}"</span>)
    toon_text := toon.encode (value)
    <span class="comment">-- Result: "name: Alice%Nage: 30"</span>

    <span class="comment">-- Decode TOON to JSON</span>
    value := toon.decode (<span class="string">"name: Bob%Nage: 25"</span>)
    json_text := value.to_json_string
    <span class="comment">-- Result: {"name":"Bob","age":25}</span>

    <span class="comment">-- Check compression ratio</span>
    print (<span class="string">"Compression: "</span> + (toon.compression_ratio (value) * 100).out + <span class="string">"%%"</span>)
<span class="keyword">end</span></code></pre>
        </section>

        <section id="decimal-precision">
            <h2>Decimal Precision</h2>
            <p>
                simple_toon integrates with <strong>simple_decimal</strong> and <strong>simple_json</strong>'s
                decimal support to ensure exact number representation without floating-point artifacts.
            </p>

            <div class="feature-grid">
                <div class="feature-card">
                    <h4>Problem with REAL</h4>
<pre><code><span class="comment">-- Using put_real</span>
obj.put_real (19.99, <span class="string">"price"</span>)
<span class="comment">-- JSON output: {"price": 19.989999999999998}</span>
<span class="comment">-- TOON output: price: 19.989999999999998</span></code></pre>
                </div>
                <div class="feature-card">
                    <h4>Solution with SIMPLE_DECIMAL</h4>
<pre><code><span class="comment">-- Using put_decimal</span>
<span class="keyword">create</span> price.make (<span class="string">"19.99"</span>)
obj.put_decimal (price, <span class="string">"price"</span>)
<span class="comment">-- JSON output: {"price": 19.99}</span>
<span class="comment">-- TOON output: price: 19.99</span></code></pre>
                </div>
            </div>
            <p>
                For financial data or any values requiring exact decimal representation, use
                <code>put_decimal</code> with SIMPLE_DECIMAL instead of <code>put_real</code>.
            </p>
        </section>

        <section id="features">
            <h2>Key Features</h2>

            <div class="feature-grid">
                <div class="feature-card">
                    <h4>30-60% Token Reduction</h4>
                    <p>Eliminates JSON's verbose syntax (braces, quotes, repeated keys).</p>
                </div>

                <div class="feature-card">
                    <h4>Tabular Arrays</h4>
                    <p>Uniform object arrays encoded as compact tables with headers.</p>
                </div>

                <div class="feature-card">
                    <h4>Lossless Round-trip</h4>
                    <p>Convert JSON to TOON and back without data loss.</p>
                </div>

                <div class="feature-card">
                    <h4>Configurable</h4>
                    <p>Adjustable indentation and delimiters (comma, tab, pipe).</p>
                </div>

                <div class="feature-card">
                    <h4>Strict Validation</h4>
                    <p>Optional strict mode with detailed error reporting.</p>
                </div>

                <div class="feature-card">
                    <h4>Decimal Precision</h4>
                    <p>Integrates with simple_decimal for exact number handling.</p>
                </div>
            </div>
        </section>

        <section id="api">
            <h2>API Reference</h2>

            <div class="api-section">
                <h3>SIMPLE_TOON</h3>
                <p>Main facade class for encoding/decoding TOON format.</p>

                <h4>Encoding (JSON to TOON)</h4>
                <div class="signature">encode (json: SIMPLE_JSON_VALUE): STRING_32</div>
                <div class="signature">json_to_toon (json_text: STRING_32): STRING_32</div>
                <div class="signature">encode_file (json_path, toon_path: STRING_32)</div>

                <h4>Decoding (TOON to JSON)</h4>
                <div class="signature">decode (toon_text: STRING_32): SIMPLE_JSON_VALUE</div>
                <div class="signature">toon_to_json (toon_text: STRING_32): STRING_32</div>
                <div class="signature">decode_file (toon_path, json_path: STRING_32)</div>

                <h4>Configuration</h4>
                <div class="signature">set_indent (spaces: INTEGER)</div>
                <div class="signature">set_delimiter (char: CHARACTER_32)</div>
                <div class="signature">set_strict_mode (enabled: BOOLEAN)</div>

                <h4>Analysis</h4>
                <div class="signature">compression_ratio (json: SIMPLE_JSON_VALUE): REAL_64</div>
                <div class="signature">is_tabular_eligible (json: SIMPLE_JSON_VALUE): BOOLEAN</div>
                <div class="signature">token_estimate (value): TUPLE [json_tokens, toon_tokens: INTEGER]</div>
            </div>

            <h3>Configuration Options</h3>
            <table>
                <tr>
                    <th>Option</th>
                    <th>Method</th>
                    <th>Values</th>
                    <th>Default</th>
                </tr>
                <tr>
                    <td>Indentation</td>
                    <td><code>set_indent</code></td>
                    <td>Any positive integer</td>
                    <td>2 spaces</td>
                </tr>
                <tr>
                    <td>Delimiter</td>
                    <td><code>set_delimiter</code></td>
                    <td><code>','</code>, <code>'%T'</code> (tab), <code>'|'</code></td>
                    <td>Comma</td>
                </tr>
                <tr>
                    <td>Strict Mode</td>
                    <td><code>set_strict_mode</code></td>
                    <td><code>True</code> / <code>False</code></td>
                    <td>True</td>
                </tr>
            </table>
        </section>

        <section id="syntax">
            <h2>TOON Syntax Reference</h2>

            <div class="feature-grid">
                <div class="feature-card">
                    <h4>Objects</h4>
<pre><code>key: value
nested:
  inner_key: inner_value</code></pre>
                </div>
                <div class="feature-card">
                    <h4>Primitive Arrays</h4>
<pre><code>[3]: red,green,blue</code></pre>
                </div>
                <div class="feature-card">
                    <h4>Tabular Arrays</h4>
<pre><code>[2]{sku,qty,price}:
  A1,10,9.99
  B2,20,14.50</code></pre>
                </div>
                <div class="feature-card">
                    <h4>List Arrays</h4>
<pre><code>[2]:
  - id: 1
    name: Alice
  - id: 2
    name: Bob</code></pre>
                </div>
            </div>
        </section>

        <section id="when-to-use">
            <h2>When to Use TOON</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>Best For</h4>
                    <ul>
                        <li>Uniform arrays of objects (product lists, records)</li>
                        <li>Flat or shallow nested structures</li>
                        <li>LLM prompt context optimization</li>
                        <li>Reducing API costs</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h4>Consider JSON For</h4>
                    <ul>
                        <li>Deeply nested structures</li>
                        <li>Non-uniform data</li>
                        <li>LLM output (models trained on JSON)</li>
                        <li>Inter-service communication</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="resources">
            <h2>Resources</h2>
            <ul>
                <li><a href="https://github.com/simple-eiffel/simple_toon">GitHub Repository</a></li>
                <li><a href="https://github.com/toon-format/spec">TOON Specification</a></li>
                <li><a href="https://toonformat.dev/">TOON Format Website</a></li>
            </ul>
        </section>
    </main>

    <footer>
        <p>Part of the <a href="https://github.com/simple-eiffel">Simple Eiffel</a> ecosystem</p>
        <p class="copyright">MIT License</p>
    </footer>
</body>
</html>
